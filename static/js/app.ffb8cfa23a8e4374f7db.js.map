{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?62d0","webpack:///./src/App.vue","webpack:///src/components/BookStore.vue","webpack:///./src/components/BookStore.vue?70ec","webpack:///./src/components/BookStore.vue","webpack:///src/components/TitleBar.vue","webpack:///./src/components/TitleBar.vue?d376","webpack:///./src/components/TitleBar.vue","webpack:///src/components/Content.vue","webpack:///./src/components/Content.vue?c6c8","webpack:///./src/components/Content.vue","webpack:///src/components/MenuBar.vue","webpack:///./src/components/MenuBar.vue?990e","webpack:///./src/components/MenuBar.vue","webpack:///src/Ebook.vue","webpack:///./src/Ebook.vue?54e7","webpack:///./src/Ebook.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["document","addEventListener","html","querySelector","fontSize","window","innerWidth","style","selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","BookStore","props","data","ifShowAbout","books","created","setBooks","methods","hideAbout","showAbout","hideDelete","index","ifShowDelete","showDelete","deleteBook","item","_this","store","removeItem","key","then","console","log","pop","getBookMeta","value","_this2","book","Object","src","restore","loaded","metadata","meta","cover","archive","createUrl","url","push","_this3","iterate","iterationNumber","inputNewEpub","e","_this4","target","files","length","file","reader","FileReader","readAsArrayBuffer","substr","indexOf","$refs","inputFile","onload","result","keys","setItem","addBook","event","click","clearBooks","clear","bookCfi","toggleStore","$emit","open","_this5","getItem","components_BookStore","_vm","staticClass","directives","rawName","expression","on","_v","href","_l","mouseenter","$event","mouseleave","_s","title","ref","staticStyle","display","type","change","TitleBar","components","BookStore_normalizeComponent","showBookStore","isFullScreen","ifShowBookInfo","bookInfo","bookProgress","Number","ifTitleAndMenuShow","Boolean","default","mounted","onkeydown","navigator","userAgent","toLowerCase","body","scrollHeight","screen","height","scrollWidth","width","outerHeight","outerWidth","screenfull_default","a","isFullscreen","storeReadProgress","alert","showBookInfo","openNewEpub","toggleFullScreen","enabled","$message","message","toggle","components_TitleBar","class","src_components_TitleBar","TitleBar_normalizeComponent","Content","ifShowConten","navigation","bookAvailable","jumpTo","components_Content","label","MenuBar","ContentView","Content_normalizeComponent","fontSizeList","Array","defaultFontSize","themeList","defaultTheme","ifSettingShow","showTag","progress","ifShowContent","watch","storeProgress","callback","showNav","hideContent","onProgressChange","setTheme","setFontSize","showSetting","tag","hideSetting","components_MenuBar","hide-box-shadow","no-border","background","selected","backgroundSize","max","min","step","disabled","domProps","__r","_e","Ebook","MenuBar_normalizeComponent","bookKey","color","bookSrc","showProgress","currentLocation","rendition","locations","percentageFromCfi","start","cfi","Math","round","hideTitleAndMenu","menuBar","percentage","location","cfiFromPercentage","themes","select","registerTheme","forEach","theme","register","toggleTitleAndMenu","prevPage","prev","nextPage","next","_this6","currentCfi","Cfi","destroy","showEpub","_this7","renderTo","method","undefined","ready","generate","handleScroll","titleBar","deltaY","selectortype_template_index_0_src_Ebook","src_Ebook","Ebook_normalizeComponent","Vue","use","Router","router","routes","path","redirect","component","vueAxios","axios","config","productionTip","localForage","createInstance","prototype","el","App","template"],"mappings":"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","file":"static/js/app.ffb8cfa23a8e4374f7db.js","sourcesContent":["<template>\n    <div id=\"app\">\n        <router-view/>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'App',\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n    const html = document.querySelector(' html ')\n    let fontSize = window.innerWidth / 10\n    fontSize = fontSize > 50 ? 50 : fontSize\n    html.style.fontSize = fontSize + 'px'\n})\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c412472\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c412472\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c412472\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n<transition name=\"slide-right\">\r\n    <div class=\"store\">\r\n        <div class=\"mask\" @click=\"hideAbout\" v-show=\"ifShowAbout\">\r\n        </div>\r\n        <transition name=\"about\">\r\n            <div class=\"about\" v-show=\"ifShowAbout\">\r\n                <div class=\"info-item\" @click=\"clearBooks\">\r\n                    <span class=\"logo icon-bin\"></span>\r\n                    <span class=\"text\">清空书架</span>\r\n                </div>\r\n                <a   href=\"https://baike.baidu.com/item/ePub/9924958?fr=aladdin\" class=\"info-item\">\r\n                <span class=\"logo icon-yelp\"></span>\r\n                <span class=\"text\"><span>关于epub</span></span>\r\n            </a>\r\n                <a href=\"https://github.com/mikufanliu/ebook\" class=\"info-item\">\r\n                <span class=\"logo icon-github\"></span>\r\n                <span class=\"text\"><span>开源地址</span></span>\r\n            </a>\r\n            </div>\r\n        </transition>\r\n        <div class=\"title-wrapper\">\r\n            <div class=\"left\">\r\n                <span class=\"icon-person icon\" @click=\"showAbout\"></span>\r\n            </div>\r\n            <div class=\"center\">\r\n                <span class=\"text\">EPUB Reader</span>\r\n            </div>\r\n            <div class=\"right\">\r\n                <span class=\"icon-arrow-right icon\" @click=\"toggleStore\"></span>\r\n                <!-- <span class=\"icon-floppy-disk icon\" @click=\"clearBooks\"></span> -->\r\n            </div>\r\n        </div>\r\n        <div class=\"book-store\">\r\n            <div class=\"book-item\" v-for=\"(item,index) in books\" :key=\"index\" @mouseenter=\"showDelete(index)\" @mouseleave=\"hideDelete(index)\">\r\n                <div class=\"cover\">\r\n                    <span class=\"icon-cross delete\" @click=\"deleteBook(item)\" v-show=\"item.ifShowDelete\"></span>\r\n                    <img v-bind:src=\"item.cover\" class=\"book-cover\" @click=\"open(item)\">\r\n                </div>\r\n                    <span class=\"book-name\">{{item.title}}</span>\r\n                </div>\r\n                <div class=\"book-item\">\r\n                    <div @click=\"addBook\" class=\"icon-folder-plus\"></div>\r\n                    <input  type=\"file\" ref=\"inputFile\" style=\"display:none\" @change=\"inputNewEpub($event)\">\r\n                    <span class=\"add-book\">点击添加图书</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nimport ePub from 'epubjs'\r\n\r\nexport default {\r\n    props: {\r\n        // books: Array\r\n    },\r\n    data() {\r\n        return {\r\n            ifShowAbout: false,\r\n            books: []\r\n        }\r\n    },\r\n    created: function () {\r\n        this.setBooks()\r\n    },\r\n    methods: {\r\n        hideAbout() {\r\n            this.ifShowAbout = false\r\n        },\r\n        showAbout() {\r\n            this.ifShowAbout = !this.ifShowAbout\r\n        },\r\n        hideDelete(index) {\r\n            this.books[index].ifShowDelete = false\r\n        },\r\n        showDelete(index) {\r\n            this.books[index].ifShowDelete = true\r\n        },\r\n        deleteBook(item) {\r\n            this.store.removeItem(item.key).then(() => {\r\n                // 当值被移除后，此处代码运行\r\n                console.log('Book is deleted!')\r\n                this.books.pop(item)\r\n            })\r\n        },\r\n        getBookMeta(value, key) {\r\n            let book = ePub(value, {\r\n                restore: true\r\n            })\r\n            book.loaded.metadata.then(meta => {\r\n                meta.key = key\r\n                meta.ifShowDelete = false\r\n                book.loaded.cover.then(cover => {\r\n                    if (cover != null) {\r\n                        book.archive.createUrl(cover).then(url => {\r\n                            meta.cover = url\r\n\r\n                            // console.log(meta)\r\n                            this.books.push(meta)\r\n                        })\r\n                    } else {\r\n                        meta.cover = './static/logo.png'\r\n                        // console.log(meta)\r\n                        this.books.push(meta)\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        setBooks() {\r\n            this.store.iterate((value, key, iterationNumber) => {\r\n                this.getBookMeta(value, key)\r\n            })\r\n            // console.log(\"set meta\")\r\n        },\r\n        inputNewEpub(e) {\r\n            // console.log(\"begin\")\r\n            let files = e.target.files\r\n            if (!files.length) {\r\n                console.log('No file selected!')\r\n                return\r\n            }\r\n            let file = e.target.files[0]\r\n            let reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            if (file.name.substr(file.name.indexOf(\".\")) != '.epub') {\r\n                console.log(file.name + \" is not an epub file!\")\r\n                this.$refs.inputFile.value = ''\r\n                return\r\n            }\r\n\r\n            reader.onload = () => {\r\n                // console.log(\"load book\")\r\n                let value = reader.result\r\n                this.store.keys().then(keys => {\r\n                    // console.log(keys)\r\n                    if (keys.indexOf(file.name) == -1) {\r\n                        this.store.setItem(file.name, value)\r\n                        console.log(\"add a new book as ArryBuffer to database\")\r\n                        this.getBookMeta(value, file.name)\r\n                    } else {\r\n                        console.log(\"not a new book\")\r\n                    }\r\n                    this.$refs.inputFile.value = ''\r\n                })\r\n            }\r\n        },\r\n        addBook(event) {\r\n            this.$refs.inputFile.click()\r\n        },\r\n\r\n        clearBooks() {\r\n            this.store.clear()\r\n            this.bookCfi.clear()\r\n            this.books = []\r\n            console.log('cleaned!')\r\n        },\r\n        toggleStore() {\r\n            this.$emit('toggleStore')\r\n        },\r\n        open(item) {\r\n            // console.log(bookKey)\r\n            this.store.getItem(item.key).then(value => {\r\n                // console.log(item.key)\r\n                this.$emit('openNewEpub', [value, item.key])\r\n            }).then(this.toggleStore)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/styles/global';\r\n\r\n.store {\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 102;\r\n    position: absolute;\r\n    // display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    box-shadow: 0 px2rem(-8) px2rem(8) rgba(0, 0, 0, .15);\r\n    font-family: ubuntu, sans-serif;\r\n\r\n    // flex-flow: column;\r\n    .mask {\r\n        position: absolute;\r\n        z-index: 102;\r\n        // background: rgba(51, 51, 51, .8);\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .about {\r\n        z-index: 103;\r\n        position: absolute;\r\n        width: 50%;\r\n        height: 27%;\r\n        left: 0;\r\n        top: 8%;\r\n        // background: rgb(232, 243, 232);\r\n        padding: px2rem(8) px2rem(3);\r\n\r\n        .info-item {\r\n            display: flex;\r\n            height: px2rem(48);\r\n            width: 100%;\r\n            background: white;\r\n            margin-bottom: px2rem(2);\r\n            border-radius: 0.4em;\r\n            box-shadow: 0 px2rem(4) px2rem(4) rgba(0, 0, 0, .15);\r\n\r\n            .logo {\r\n                width: 20%;\r\n                height: 100%;\r\n                @include center;\r\n                border-right: px2rem(1) solid #ccc;\r\n            }\r\n\r\n            .text {\r\n                width: 80%;\r\n                height: 100%;\r\n                @include center;\r\n                font-size: px2rem(25);\r\n            }\r\n\r\n            &.info-item:hover{\r\n            height: px2rem(55);\r\n            width: 105%;\r\n            }\r\n        }\r\n    }\r\n\r\n    .title-wrapper {\r\n        position: relative;\r\n        display: flex;\r\n        width: 100%;\r\n        height: 8%;\r\n        background: rgb(232, 243, 232);\r\n        border-bottom: 1px solid #333;\r\n\r\n        .left {\r\n            @include center;\r\n            flex: 0 0 px2rem(60);\r\n        }\r\n\r\n        .center {\r\n            flex: 1;\r\n            @include center;\r\n            font-size: px2rem(30);\r\n        }\r\n\r\n        .right {\r\n            @include center;\r\n            flex: 0 0 px2rem(60);\r\n        }\r\n    }\r\n\r\n    .book-store {\r\n        position: relative;\r\n        display: flex;\r\n        width: 100%;\r\n        height: 92%;\r\n        background: linear-gradient(rgb(232, 243, 232), rgb(175, 191, 243));\r\n        flex-flow: wrap;\r\n        overflow: auto;\r\n        @include center;\r\n\r\n        .book-item {\r\n            display: flex;\r\n            flex-flow: column;\r\n            // position:absolute;\r\n            margin: px2rem(20) px2rem(20) px2rem(20) px2rem(20);\r\n            // border: px2rem(1) solid #ccc;\r\n            width: px2rem(150);\r\n            height: px2rem(250);\r\n            background: rgb(255, 255, 255);\r\n            @include center;\r\n            position: relative;\r\n            box-shadow: 0 px2rem(9) px2rem(10) rgba(0, 0, 0, .15);\r\n\r\n            .cover {\r\n                width: 100%;\r\n                height: 90%;\r\n                // background: blue;\r\n\r\n                .delete {\r\n                    color: rgb(253, 206, 206);\r\n                    position: absolute;\r\n                    display: block;\r\n                    top: -10px;\r\n                    right: 0;\r\n                    font-size: px2rem(25);\r\n                }\r\n\r\n                .delete:hover {\r\n                    top: -15px;\r\n                    font-size: px2rem(40);\r\n                    color: rgb(250, 0, 0);\r\n                }\r\n\r\n                .book-cover {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n            }\r\n\r\n            .book-name {\r\n                width: 100%;\r\n                height: 10%;\r\n                font-size: px2rem(8);\r\n                @include center;\r\n            }\r\n\r\n            .icon-folder-plus {\r\n                @include center;\r\n                width: 100%;\r\n                height: 100%;\r\n                font-size: px2rem(70);\r\n            }\r\n\r\n            .add-book {\r\n                font-size: px2rem(15);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/BookStore.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide-right\"}},[_c('div',{staticClass:\"store\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowAbout),expression:\"ifShowAbout\"}],staticClass:\"mask\",on:{\"click\":_vm.hideAbout}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"about\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowAbout),expression:\"ifShowAbout\"}],staticClass:\"about\"},[_c('div',{staticClass:\"info-item\",on:{\"click\":_vm.clearBooks}},[_c('span',{staticClass:\"logo icon-bin\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(\"清空书架\")])]),_vm._v(\" \"),_c('a',{staticClass:\"info-item\",attrs:{\"href\":\"https://baike.baidu.com/item/ePub/9924958?fr=aladdin\"}},[_c('span',{staticClass:\"logo icon-yelp\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_c('span',[_vm._v(\"关于epub\")])])]),_vm._v(\" \"),_c('a',{staticClass:\"info-item\",attrs:{\"href\":\"https://github.com/mikufanliu/ebook\"}},[_c('span',{staticClass:\"logo icon-github\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_c('span',[_vm._v(\"开源地址\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"title-wrapper\"},[_c('div',{staticClass:\"left\"},[_c('span',{staticClass:\"icon-person icon\",on:{\"click\":_vm.showAbout}})]),_vm._v(\" \"),_c('div',{staticClass:\"center\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"EPUB Reader\")])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('span',{staticClass:\"icon-arrow-right icon\",on:{\"click\":_vm.toggleStore}})])]),_vm._v(\" \"),_c('div',{staticClass:\"book-store\"},[_vm._l((_vm.books),function(item,index){return _c('div',{key:index,staticClass:\"book-item\",on:{\"mouseenter\":function($event){return _vm.showDelete(index)},\"mouseleave\":function($event){return _vm.hideDelete(index)}}},[_c('div',{staticClass:\"cover\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.ifShowDelete),expression:\"item.ifShowDelete\"}],staticClass:\"icon-cross delete\",on:{\"click\":function($event){return _vm.deleteBook(item)}}}),_vm._v(\" \"),_c('img',{staticClass:\"book-cover\",attrs:{\"src\":item.cover},on:{\"click\":function($event){return _vm.open(item)}}})]),_vm._v(\" \"),_c('span',{staticClass:\"book-name\"},[_vm._v(_vm._s(item.title))])])}),_vm._v(\" \"),_c('div',{staticClass:\"book-item\"},[_c('div',{staticClass:\"icon-folder-plus\",on:{\"click\":_vm.addBook}}),_vm._v(\" \"),_c('input',{ref:\"inputFile\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.inputNewEpub($event)}}}),_vm._v(\" \"),_c('span',{staticClass:\"add-book\"},[_vm._v(\"点击添加图书\")])])],2)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-699e518b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/BookStore.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-699e518b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BookStore.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BookStore.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BookStore.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-699e518b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./BookStore.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-699e518b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/BookStore.vue\n// module id = null\n// module chunks = ","<template>\r\n<div class=\"title-bar\">\r\n    <transition name=\"slide-down\">\r\n        <div class=\"title-wrapper\" v-show=\"ifTitleAndMenuShow\">\r\n            <div class=\"left\">\r\n                <span class=\"icon-books icon\" @click=\"toggleStore\"></span>\r\n            </div>\r\n            <div class=\"right\">\r\n                <div class=\"icon-wrapper\">\r\n                    <span class=\"icon-history icon\" @click=\"storeReadProgress\"></span>\r\n                </div>\r\n                <div class=\"icon-wrapper\">\r\n                    <span class=\"icon-file-text icon\" @click=\"showBookInfo\">\r\n                </span>\r\n                </div>\r\n                <div class=\"icon-wrapper\">\r\n                    <span class=\"icon\" :class=\"[isFullScreen?'icon-shrink':'icon-enlarge']\"\r\n                     @click=\"toggleFullScreen\">\r\n                </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </transition>\r\n    <book-store @openNewEpub=\"openNewEpub\" :bookProgress=\"bookProgress\" v-show=\"showBookStore\" @toggleStore=\"toggleStore\"></book-store>\r\n  <transition name=\"fade\">\r\n    <div class=\"content-mask\" @click=\"showBookInfo\" v-show=\"ifShowBookInfo\">\r\n    </div>\r\n  </transition>\r\n<transition name=\"slide-left\">\r\n    <div class=\"info-content\" v-show=\"ifShowBookInfo\">\r\n        <div class=\"book-cover\">\r\n            <img v-bind:src=\"this.bookInfo.cover\"  class=\"cover\">\r\n        </div>\r\n            <div class=\"meta-info\">\r\n                <div class=\"info-item\" v-for=\"(item,index) in bookInfo\" :key=\"index\" v-show=\"index!='cover'&&item!='' &&item!=null\">\r\n                    <span class=\"index\">{{index}}</span>\r\n                    <span class=\"item\">{{item}}</span>\r\n                </div>\r\n            </div>\r\n    </div>\r\n</transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport screenFull from 'screenfull'\r\nimport BookStore from '@/components/BookStore'\r\nimport ePub from 'epubjs'\r\n// import { Stream } from 'stream';\r\n\r\nexport default {\r\n    components: {\r\n        BookStore\r\n    },\r\n    data() {\r\n        return {\r\n            showBookStore: true,\r\n            isFullScreen: false,\r\n            ifShowBookInfo: false\r\n        }\r\n    },\r\n    props: {\r\n\r\n        bookInfo: Object,\r\n        bookProgress: Number,\r\n        ifTitleAndMenuShow: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    mounted() {\r\n        document.onkeydown = (e) => {\r\n            console.log(e)\r\n            var explorer = window.navigator.userAgent.toLowerCase();\r\n            if (explorer.indexOf('chrome') > 0) { //webkit\r\n                if (document.body.scrollHeight === window.screen.height && document.body.scrollWidth === window.screen.width) {\r\n                    this.isFullScreen = true\r\n                } else {\r\n                    this.isFullScreen = false\r\n                }\r\n            } else { //IE 9+  fireFox\r\n                if (window.outerHeight === window.screen.height && window.outerWidth === window.screen.width) {\r\n                    this.isFullScreen = true\r\n                } else {\r\n                    this.isFullScreen = false\r\n                }\r\n            }\r\n            // console.log('Am I fullscreen?', this.isFullScreen ? 'Yes' : 'No');\r\n        }\r\n        screenFull.on('change', () => {\r\n            // console.log('Am I fullscreen?', screenFull.isFullscreen ? 'Yes' : 'No');\r\n            this.isFullScreen = screenFull.isFullscreen\r\n        });\r\n    },\r\n    methods: {\r\n        storeReadProgress() {\r\n            alert('您已成功保存阅读进度')\r\n            this.$emit('storeReadProgress')\r\n        },\r\n        showBookInfo() {\r\n            this.ifShowBookInfo = !this.ifShowBookInfo\r\n            // console.log(this.bookInfo)\r\n        },\r\n        openNewEpub(value) {\r\n            this.$emit('openNewEpub', value)\r\n        },\r\n        // 点击 显示/隐藏 书架\r\n        toggleStore() {\r\n            this.showBookStore = !this.showBookStore\r\n        },\r\n        // 点击切换全屏\r\n        toggleFullScreen() {\r\n            if (!screenFull.enabled) {\r\n                this.$message({\r\n                    message: 'Your browser does not work',\r\n                    type: 'warning'\r\n                })\r\n                return false\r\n            }\r\n            screenFull.toggle()\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../assets/styles/global\";\r\n\r\n.title-bar {\r\n    .content-mask {\r\n        position: absolute;\r\n        z-index: 102;\r\n        background: rgba(51, 51, 51, .8);\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .info-content {\r\n        position: absolute;\r\n        z-index: 103;\r\n        // display: flex;\r\n        right: 0;\r\n        background: linear-gradient(to top right, rgb(238, 220, 220), rgb(207, 228, 190));\r\n        width: 80%;\r\n        height: 100%;\r\n        overflow: auto;\r\n\r\n        .book-cover {\r\n            width: 100%;\r\n            height: 50%;\r\n            // margin: px2rem(2) 0 px2rem(2) 0;\r\n            @include center;\r\n\r\n            .cover {\r\n                width: px2rem(150);\r\n                height: px2rem(240);\r\n                box-shadow: 0 px2rem(4) px2rem(4) rgba(0, 0, 0, .15);\r\n            }\r\n        }\r\n\r\n        .meta-info {\r\n            background: white;\r\n            border-radius: 0.5em;\r\n            box-shadow: 0 px2rem(4) px2rem(4) rgba(0, 0, 0, .15);\r\n\r\n            .info-item {\r\n                &:not(:first-child) {\r\n                    border-top: 1px solid #ccc;\r\n                }\r\n\r\n                display: flex;\r\n                height: px2rem(40);\r\n                width: 100%;\r\n                font-size: px2rem(10);\r\n\r\n                .index {\r\n                    height: 100%;\r\n                    width: 30%;\r\n                    @include center;\r\n                    border-right: 1px dashed #ccc;\r\n\r\n                }\r\n\r\n                .item {\r\n                    height: 100%;\r\n                    width: 70%;\r\n                    @include center;\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    .title-wrapper {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 101;\r\n        display: flex;\r\n        width: 100%;\r\n        height: px2rem(48);\r\n        background:  rgb(232, 243, 232);\r\n        box-shadow: 0 px2rem(8) px2rem(8) rgba(0, 0, 0, 0.15);\r\n\r\n        .left {\r\n            flex: 0 0 px2rem(60);\r\n            @include center;\r\n        }\r\n\r\n        .right {\r\n            flex: 1;\r\n            display: flex;\r\n            justify-content: flex-end;\r\n\r\n            .icon-wrapper {\r\n                @include center;\r\n                flex: 0 0 px2rem(40);\r\n\r\n                .icon-cart {\r\n                    font-size: px2rem(20);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/TitleBar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar\"},[_c('transition',{attrs:{\"name\":\"slide-down\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifTitleAndMenuShow),expression:\"ifTitleAndMenuShow\"}],staticClass:\"title-wrapper\"},[_c('div',{staticClass:\"left\"},[_c('span',{staticClass:\"icon-books icon\",on:{\"click\":_vm.toggleStore}})]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-history icon\",on:{\"click\":_vm.storeReadProgress}})]),_vm._v(\" \"),_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-file-text icon\",on:{\"click\":_vm.showBookInfo}})]),_vm._v(\" \"),_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon\",class:[_vm.isFullScreen?'icon-shrink':'icon-enlarge'],on:{\"click\":_vm.toggleFullScreen}})])])])]),_vm._v(\" \"),_c('book-store',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showBookStore),expression:\"showBookStore\"}],attrs:{\"bookProgress\":_vm.bookProgress},on:{\"openNewEpub\":_vm.openNewEpub,\"toggleStore\":_vm.toggleStore}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowBookInfo),expression:\"ifShowBookInfo\"}],staticClass:\"content-mask\",on:{\"click\":_vm.showBookInfo}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-left\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowBookInfo),expression:\"ifShowBookInfo\"}],staticClass:\"info-content\"},[_c('div',{staticClass:\"book-cover\"},[_c('img',{staticClass:\"cover\",attrs:{\"src\":this.bookInfo.cover}})]),_vm._v(\" \"),_c('div',{staticClass:\"meta-info\"},_vm._l((_vm.bookInfo),function(item,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(index!='cover'&&item!='' &&item!=null),expression:\"index!='cover'&&item!='' &&item!=null\"}],key:index,staticClass:\"info-item\"},[_c('span',{staticClass:\"index\"},[_vm._v(_vm._s(index))]),_vm._v(\" \"),_c('span',{staticClass:\"item\"},[_vm._v(_vm._s(item))])])}),0)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-519a147a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TitleBar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-519a147a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TitleBar.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TitleBar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TitleBar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-519a147a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TitleBar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-519a147a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TitleBar.vue\n// module id = null\n// module chunks = ","<template>\r\n<transition name=\"slide-right\">\r\n    <div class=\"content\">\r\n        <div class=\"content-wrapper\" v-if=\"bookAvailable\" id=\"scrollbar\">\r\n            <div class=\"content-item\" v-for=\"(item,index) in navigation.toc\" :key=\"index\" @click=\"jumpTo(item.href)\">\r\n                <span class=\"text\">{{item.label}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"empty\" v-else>加载中...</div>\r\n    </div>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        ifShowConten: Boolean,\r\n        navigation: Object,\r\n        bookAvailable: Boolean\r\n    },\r\n    methods: {\r\n        jumpTo(target) {\r\n            this.$emit('jumpTo', target)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/styles/global';\r\n\r\n.content {\r\n    position: absolute;\r\n    z-index: 102;\r\n    top: 0;\r\n    left: 0;\r\n    background: white;\r\n    width: 75%;\r\n    height: 100%;\r\n    font-family: ubuntu, sans-serif;\r\n\r\n    .content-wrapper {\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: auto;\r\n\r\n        .content-item {\r\n            padding: px2rem(20) px2rem(15);\r\n            border-bottom: px2rem(1) solid red;\r\n\r\n            .text {\r\n                font-size: px2rem(16);\r\n                color: #333;\r\n            }\r\n        }\r\n    }\r\n\r\n    .empty {\r\n        width: 100%;\r\n        height: 100%;\r\n        @include center;\r\n        font-size: px2rem(16);\r\n        color: #333;\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Content.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide-right\"}},[_c('div',{staticClass:\"content\"},[(_vm.bookAvailable)?_c('div',{staticClass:\"content-wrapper\",attrs:{\"id\":\"scrollbar\"}},_vm._l((_vm.navigation.toc),function(item,index){return _c('div',{key:index,staticClass:\"content-item\",on:{\"click\":function($event){return _vm.jumpTo(item.href)}}},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(item.label))])])}),0):_c('div',{staticClass:\"empty\"},[_vm._v(\"加载中...\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-359bdcf2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Content.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-359bdcf2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Content.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Content.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Content.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-359bdcf2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Content.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-359bdcf2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Content.vue\n// module id = null\n// module chunks = ","<template>\r\n<div class=\"menu-bar\">\r\n    <transition name=\"slide-up\">\r\n        <div class=\"menu-wrapper\" :class=\"{'hide-box-shadow':ifSettingShow || !ifTitleAndMenuShow}\" v-show=\"ifTitleAndMenuShow\">\r\n            <div class=\"icon-wrapper\">\r\n                <span class=\"icon-menu icon\" @click=\"showNav()\"></span>\r\n            </div>\r\n            <div class=\"icon-wrapper\">\r\n                <span class=\"icon-progress icon\" @click=\"showSetting(2)\"></span>\r\n            </div>\r\n            <div class=\"icon-wrapper\">\r\n                <span class=\"icon-bright icon\" @click=\"showSetting(1)\"></span>\r\n            </div>\r\n            <div class=\"icon-wrapper\">\r\n                <span class=\"icon-a icon\" @click=\"showSetting(0)\">A</span>\r\n            </div>\r\n        </div>\r\n    </transition>\r\n    <transition name=\"slide-up\">\r\n        <div class=\"setting-wrapper\" v-show=\" ifSettingShow\">\r\n            <div class=\"setting-font-size\" v-if=\"showTag === 0\">\r\n                <div class=\"preview left\" :style=\"{fontSize: fontSizeList[0].fontSize + 'px'}\">A</div>\r\n                <div class=\"select\">\r\n                    <div class=\"select-wrapper\" v-for=\"(item,index) in fontSizeList\" :key=\"index\" @click=\"setFontSize(item.fontSize)\">\r\n                        <div class=\"line\"></div>\r\n                        <div class=\"point-wrapper\">\r\n                            <div class=\"point\" v-show=\"defaultFontSize === item.fontSize\">\r\n                                <div class=\"small-point\"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"line\"></div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"preview right\" :style=\"{fontSize: fontSizeList[fontSizeList.length - 1].fontSize + 'px'}\">A</div>\r\n            </div>\r\n            <div class=\"setting-theme\" v-else-if=\"showTag === 1\">\r\n                <div class=\"setting-theme-item\" v-for=\"(item,index) in themeList\" :key=\"index\" @click=\"setTheme(index)\">\r\n                    <div class=\"preview\" :style=\"{background: item.style.body.background}\" :class=\"{'no-border': item.style.body.background == '#000'}\">Aa</div>\r\n                    <div class=\"text\" :class=\"{'selected': index=== defaultTheme}\">{{item.name}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"setting-progress\" v-else-if=\"showTag === 2\">\r\n                <div class=\"progress-wrapper\">\r\n                    <input type=\"range\" class=\"progress\"\r\n                        max=\"100\"\r\n                        min=\"0\"\r\n                        step=\"1\"\r\n                        @change=\"onProgressChange($event.target.value)\"\r\n                        v-model=\"progress\"\r\n                        :disabled=\"!bookAvailable\"\r\n                        :style=\"{backgroundSize: progress + '% 100%'}\"\r\n                        ref=\"progress\">\r\n                    </div>\r\n                    <div class=\"text-wrapper\">\r\n                        <span>{{bookAvailable? progress + \"%\" : '加载中'}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    </transition>\r\n    <content-view :ifShowContent=\"ifShowContent\" v-show=\"ifShowContent\" :navigation=\"navigation\" :bookAvailable=\"bookAvailable\" @jumpTo=\"jumpTo\">\r\n    </content-view>\r\n    <transition name=\"fade\">\r\n        <div class=\"content-mask\" v-show=\"ifShowContent\" @click=\"hideContent\">\r\n        </div>\r\n    </transition>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport ContentView from '@/components/Content'\r\nexport default {\r\n    //对引入组件进行注册 \r\n    components: {\r\n        ContentView\r\n    },\r\n    props: {\r\n        ifTitleAndMenuShow: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        fontSizeList: Array,\r\n        defaultFontSize: Number,\r\n        themeList: Array,\r\n        defaultTheme: Number,\r\n        bookAvailable: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        navigation: Object,\r\n        bookProgress: Number\r\n    },\r\n    data() {\r\n        return {\r\n            ifSettingShow: false,\r\n            showTag: 0,\r\n            progress: 0,\r\n            ifShowContent: false\r\n        }\r\n    },\r\n    watch: {\r\n        // 监听bookProgress的改变，动态赋值给progress\r\n        bookProgress: function () {\r\n            this.progress = this.bookProgress\r\n        },\r\n    },\r\n    methods: {\r\n        storeProgress(callback) {\r\n            this.$emit('storeProgress')\r\n        },\r\n\r\n        showNav() {\r\n            this.ifShowContent = !this.ifShowContent,\r\n                this.ifSettingShow = false\r\n        },\r\n        //隐藏目录\r\n        hideContent() {\r\n            this.ifShowContent = false\r\n        },\r\n        // 调用父组件的跳转目录\r\n        jumpTo(target) {\r\n            this.$emit('jumpTo', target)\r\n        },\r\n        // 拖动进度条后松开触发事件，跳转到指定位置\r\n        onProgressChange(progress) {\r\n            this.$emit('onProgressChange', progress)\r\n        },\r\n        setTheme(index) {\r\n            this.$emit('setTheme', index)\r\n        },\r\n        setFontSize(fontSize) {\r\n            this.$emit('setFontSize', fontSize)\r\n        },\r\n        showSetting(tag) {\r\n            if (this.showTag === tag) {\r\n                this.ifSettingShow = !this.ifSettingShow\r\n            } else {\r\n                this.ifSettingShow = true,\r\n                    this.showTag = tag\r\n            }\r\n        },\r\n        hideSetting() {\r\n            this.ifSettingShow = false\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/styles/global';\r\n\r\n.menu-bar {\r\n\r\n    .menu-wrapper {\r\n        &.hide-box-shadow {\r\n            box-shadow: none\r\n        }\r\n\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 101;\r\n        display: flex;\r\n        width: 100%;\r\n        height: px2rem(48);\r\n        background: rgb(232, 243, 232);\r\n        box-shadow: 0 px2rem(-8) px2rem(8) rgba(0, 0, 0, .15);\r\n\r\n        .icon-wrapper {\r\n            flex: 1;\r\n            @include center;\r\n\r\n            .icon-progress {\r\n                font-size: px2rem(25);\r\n            }\r\n\r\n            .icon-bright {\r\n                font-size: px2rem(20);\r\n            }\r\n        }\r\n    }\r\n\r\n    .setting-wrapper {\r\n        position: absolute;\r\n        bottom: px2rem(48);\r\n        left: 0;\r\n        width: 100%;\r\n        height: px2rem(60);\r\n        z-index: 101;\r\n        background: rgb(232, 243, 232);\r\n        box-shadow: 0 px2rem(-8) px2rem(8) rgba(0, 0, 0, .15);\r\n        border-bottom: 1px solid #bbb;\r\n\r\n        .setting-font-size {\r\n            display: flex;\r\n            height: 100%;\r\n\r\n            .preview {\r\n                flex: 0 0 px2rem(40);\r\n                @include center;\r\n                position: relative;\r\n\r\n                &.left {\r\n                    left: calc(((100% - 80px) / 14 + 40px) / 2 - 20px);\r\n                }\r\n\r\n                &.right {\r\n                    right: calc(((100% - 80px) / 14 + 40px) / 2 - 20px);\r\n                }\r\n            }\r\n\r\n            .select {\r\n                display: flex;\r\n                flex: 1;\r\n\r\n                .select-wrapper {\r\n                    flex: 1;\r\n                    display: flex;\r\n                    align-items: center;\r\n\r\n                    &:first-child {\r\n                        .line {\r\n                            &:first-child {\r\n                                border-top: none;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    &:last-child {\r\n                        .line {\r\n                            &:last-child {\r\n                                border-top: none;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    .line {\r\n                        flex: 1;\r\n                        height: 0;\r\n                        border-top: px2rem(1) solid #ccc;\r\n\r\n                    }\r\n\r\n                    .point-wrapper {\r\n                        position: relative;\r\n                        flex: 0 0 0;\r\n                        width: 0;\r\n                        height: px2rem(7);\r\n                        border-left: px2rem(1) solid #ccc;\r\n\r\n                        .point {\r\n                            position: absolute;\r\n                            top: px2rem(-8);\r\n                            left: px2rem(-10);\r\n                            width: px2rem(20);\r\n                            height: px2rem(20);\r\n                            border-radius: 50%;\r\n                            background: white;\r\n\r\n                            border: px2rem(1) solid #ccc;\r\n                            box-shadow: 0 px2rem(4) px2rem(4) rgba(0, 0, 0, .15);\r\n                            @include center;\r\n\r\n                            .small-point {\r\n                                width: px2rem(5);\r\n                                height: px2rem(5);\r\n                                border-radius: 50%;\r\n                                background: black;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .setting-theme {\r\n            height: 100%;\r\n            display: flex;\r\n\r\n            .setting-theme-item {\r\n                flex: 1;\r\n                display: flex;\r\n                flex-direction: column;\r\n                padding: px2rem(5);\r\n                box-sizing: border-box;\r\n\r\n                .preview {\r\n                    flex: 1;\r\n                    // border: px2rem(1) solid #ccc;\r\n                    box-sizing: border-box;\r\n                    font-size: px2rem(25);\r\n                    @include center;\r\n                    border-radius: 0.3em;\r\n\r\n                    &.no-border {\r\n                        color: white;\r\n                    }\r\n                }\r\n\r\n                .text {\r\n                    flex: 0 0 px2rem(20);\r\n                    font-size: px2rem(16);\r\n                    color: #ccc;\r\n                    @include center;\r\n\r\n                    &.selected {\r\n                        color: #333\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .setting-progress {\r\n            position: relative;\r\n            width: 100%;\r\n            height: 100%;\r\n\r\n            .progress-wrapper {\r\n                height: 80%;\r\n                width: 100%;\r\n                padding: 0 px2rem(30);\r\n                box-sizing: border-box;\r\n                @include center;\r\n\r\n                .progress {\r\n                    width: 100%;\r\n                    -webkit-appearance: none;\r\n                    height: px2rem(2);\r\n                    border-radius: 10%;\r\n                    background: -webkit-linear-gradient(#999, #999) no-repeat, #ddd;\r\n                    background-size: 0 100%;\r\n\r\n                    &:focus {\r\n                        outline: none;\r\n                    }\r\n\r\n                    &::-webkit-slider-thumb {\r\n                        -webkit-appearance: none;\r\n                        width: px2rem(20);\r\n                        height: px2rem(20);\r\n                        border-radius: 50%;\r\n                        background: white;\r\n                        box-shadow: 0 px2rem(4) px2rem(4) 0 rgba(0, 0, 0, .15);\r\n                        border: px2rem(1) solid #ddd;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            .text-wrapper {\r\n                position: absolute;\r\n                bottom: px2rem(1);\r\n                width: 100%;\r\n                color: #666;\r\n                font-size: px2rem(12);\r\n                @include center;\r\n            }\r\n        }\r\n    }\r\n\r\n    .content-mask {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 101;\r\n        display: flex;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: rgba(51, 51, 51, .8);\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/MenuBar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menu-bar\"},[_c('transition',{attrs:{\"name\":\"slide-up\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifTitleAndMenuShow),expression:\"ifTitleAndMenuShow\"}],staticClass:\"menu-wrapper\",class:{'hide-box-shadow':_vm.ifSettingShow || !_vm.ifTitleAndMenuShow}},[_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-menu icon\",on:{\"click\":function($event){return _vm.showNav()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-progress icon\",on:{\"click\":function($event){return _vm.showSetting(2)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-bright icon\",on:{\"click\":function($event){return _vm.showSetting(1)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"icon-wrapper\"},[_c('span',{staticClass:\"icon-a icon\",on:{\"click\":function($event){return _vm.showSetting(0)}}},[_vm._v(\"A\")])])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-up\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:( _vm.ifSettingShow),expression:\" ifSettingShow\"}],staticClass:\"setting-wrapper\"},[(_vm.showTag === 0)?_c('div',{staticClass:\"setting-font-size\"},[_c('div',{staticClass:\"preview left\",style:({fontSize: _vm.fontSizeList[0].fontSize + 'px'})},[_vm._v(\"A\")]),_vm._v(\" \"),_c('div',{staticClass:\"select\"},_vm._l((_vm.fontSizeList),function(item,index){return _c('div',{key:index,staticClass:\"select-wrapper\",on:{\"click\":function($event){return _vm.setFontSize(item.fontSize)}}},[_c('div',{staticClass:\"line\"}),_vm._v(\" \"),_c('div',{staticClass:\"point-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.defaultFontSize === item.fontSize),expression:\"defaultFontSize === item.fontSize\"}],staticClass:\"point\"},[_c('div',{staticClass:\"small-point\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"line\"})])}),0),_vm._v(\" \"),_c('div',{staticClass:\"preview right\",style:({fontSize: _vm.fontSizeList[_vm.fontSizeList.length - 1].fontSize + 'px'})},[_vm._v(\"A\")])]):(_vm.showTag === 1)?_c('div',{staticClass:\"setting-theme\"},_vm._l((_vm.themeList),function(item,index){return _c('div',{key:index,staticClass:\"setting-theme-item\",on:{\"click\":function($event){return _vm.setTheme(index)}}},[_c('div',{staticClass:\"preview\",class:{'no-border': item.style.body.background == '#000'},style:({background: item.style.body.background})},[_vm._v(\"Aa\")]),_vm._v(\" \"),_c('div',{staticClass:\"text\",class:{'selected': index=== _vm.defaultTheme}},[_vm._v(_vm._s(item.name))])])}),0):(_vm.showTag === 2)?_c('div',{staticClass:\"setting-progress\"},[_c('div',{staticClass:\"progress-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.progress),expression:\"progress\"}],ref:\"progress\",staticClass:\"progress\",style:({backgroundSize: _vm.progress + '% 100%'}),attrs:{\"type\":\"range\",\"max\":\"100\",\"min\":\"0\",\"step\":\"1\",\"disabled\":!_vm.bookAvailable},domProps:{\"value\":(_vm.progress)},on:{\"change\":function($event){return _vm.onProgressChange($event.target.value)},\"__r\":function($event){_vm.progress=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"text-wrapper\"},[_c('span',[_vm._v(_vm._s(_vm.bookAvailable? _vm.progress + \"%\" : '加载中'))])])]):_vm._e()])]),_vm._v(\" \"),_c('content-view',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowContent),expression:\"ifShowContent\"}],attrs:{\"ifShowContent\":_vm.ifShowContent,\"navigation\":_vm.navigation,\"bookAvailable\":_vm.bookAvailable},on:{\"jumpTo\":_vm.jumpTo}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowContent),expression:\"ifShowContent\"}],staticClass:\"content-mask\",on:{\"click\":_vm.hideContent}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1cd0157e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MenuBar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1cd0157e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MenuBar.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuBar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuBar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1cd0157e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MenuBar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1cd0157e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MenuBar.vue\n// module id = null\n// module chunks = ","<template>\r\n<div class=\"ebook\">\r\n    <title-bar ref=\"titleBar\" @storeReadProgress=\"storeReadProgress\" :bookProgress=\"bookProgress\" :ifTitleAndMenuShow=\"ifTitleAndMenuShow\" @openNewEpub=\"openNewEpub\" :bookInfo=\"bookInfo\"></title-bar>\r\n    <div class=\"read-wrapper\">\r\n        <div id=\"read\"></div>\r\n        <div class=\"mask\">\r\n            <div class=\"left\" @click=\"prevPage\"></div>\r\n            <div class=\"center\" @click=\"toggleTitleAndMenu\"></div>\r\n            <div class=\"right\" @click=\"nextPage\"></div>\r\n        </div>\r\n    </div>\r\n    <menu-bar :ifTitleAndMenuShow=\"ifTitleAndMenuShow\" :fontSizeList=\"fontSizeList\" :defaultFontSize=\"defaultFontSize\" @setFontSize=\"setFontSize\" :themeList=\"themeList\" :defaultTheme=\"defaultTheme\" @setTheme=\"setTheme\" :bookAvailable=\"bookAvailable\" @onProgressChange=\"onProgressChange\" @jumpTo=\"jumpTo\" :navigation=\"navigation\" :bookProgress=\"bookProgress\" ref=\"menuBar\">\r\n    </menu-bar>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n// toggleTitleAndMenu\r\nimport TitleBar from '@/components/TitleBar'\r\nimport MenuBar from '@/components/MenuBar'\r\nimport ePub from 'epubjs'\r\n\r\nconst DOWNLOAD_URL1 = './static/book1.epub'\r\nconst DOWNLOAD_URL2 = './static/book2.epub'\r\n\r\nexport default {\r\n    components: {\r\n        TitleBar,\r\n        MenuBar\r\n    },\r\n    data() {\r\n        return {\r\n            bookKey: 'deafault',\r\n            book: null,\r\n            bookInfo: {},\r\n            ifTitleAndMenuShow: true,\r\n            fontSizeList: [{\r\n                    fontSize: 12\r\n                },\r\n                {\r\n                    fontSize: 14\r\n                },\r\n                {\r\n                    fontSize: 16\r\n                },\r\n                {\r\n                    fontSize: 18\r\n                },\r\n                {\r\n                    fontSize: 20\r\n                },\r\n                {\r\n                    fontSize: 22\r\n                },\r\n                {\r\n                    fontSize: 24\r\n                }\r\n            ],\r\n            defaultFontSize: 16,\r\n            themeList: [{\r\n                    name: '默认',\r\n                    style: {\r\n                        body: {\r\n                            'color': '#000',\r\n                            'background': '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: '护眼',\r\n                    style: {\r\n                        body: {\r\n                            'color': '#000',\r\n                            'background': '#ceeaba'\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: '夜间',\r\n                    style: {\r\n                        body: {\r\n                            'color': '#fff',\r\n                            'background': '#000'\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    name: '纸张',\r\n                    style: {\r\n                        body: {\r\n                            'color': '#000',\r\n                            'background': 'rgba(241, 236, 226)'\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n            defaultTheme: 0,\r\n            bookAvailable: false,\r\n            navigation: {},\r\n            bookProgress: 0,\r\n            bookSrc: DOWNLOAD_URL1\r\n        }\r\n    },\r\n    methods: {\r\n        showProgress() {\r\n            // console.log('change')\r\n            let currentLocation = this.rendition.currentLocation()\r\n            this.bookProgress = this.bookAvailable ? this.locations.percentageFromCfi(currentLocation.start.cfi) : 0\r\n            this.bookProgress = Math.round(this.bookProgress * 100)\r\n        },\r\n        //跳转到指定的链接\r\n        jumpTo(href) {\r\n            this.rendition.display(href).then(\r\n                () => {\r\n                    this.showProgress()\r\n                }\r\n            )\r\n            this.hideTitleAndMenu()\r\n        },\r\n        hideTitleAndMenu() {\r\n            this.ifTitleAndMenuShow = false\r\n            this.$refs.menuBar.hideSetting()\r\n            this.$refs.menuBar.hideContent()\r\n        },\r\n        onProgressChange(progress) {\r\n            const percentage = progress / 100\r\n            const location = percentage > 0 ? this.locations.cfiFromPercentage(percentage) : 0\r\n            this.rendition.display(location)\r\n        },\r\n        setTheme(index) {\r\n            this.themes.select(this.themeList[index].name)\r\n            this.defaultTheme = index\r\n        },\r\n        registerTheme() {\r\n            this.themeList.forEach(theme => {\r\n                this.themes.register(theme.name, theme.style)\r\n            })\r\n        },\r\n        setFontSize(fontSize) {\r\n            this.defaultFontSize = fontSize\r\n            if (this.themes) {\r\n                this.themes.fontSize(fontSize + 'px')\r\n            }\r\n        },\r\n        toggleTitleAndMenu() {\r\n            this.ifTitleAndMenuShow = !this.ifTitleAndMenuShow\r\n            if (!this.ifTitleAndMenuShow) {\r\n                this.$refs.menuBar.hideSetting()\r\n            }\r\n        },\r\n        prevPage() {\r\n            if (this.rendition) {\r\n                this.rendition.prev().then(\r\n                    () => {\r\n                        this.showProgress()\r\n                    }\r\n                )\r\n            }\r\n        },\r\n        nextPage() {\r\n            if (this.rendition) {\r\n                this.rendition.next().then(\r\n                    () => {\r\n                        this.showProgress()\r\n                    }\r\n                )\r\n            }\r\n        },\r\n        storeReadProgress() {\r\n            let cfi = this.rendition.currentLocation().start.cfi\r\n            this.bookCfi.setItem(this.bookKey, cfi).then(() => {\r\n                console.log(this.bookKey + \"'s read  progress is stored!\")\r\n            })\r\n        },\r\n\r\n        // 电子书的解析和渲染\r\n        openNewEpub(value) {\r\n            // 清除上一本书的状态\r\n            this.bookAvailable = false\r\n            this.$refs.menuBar.progress = 0\r\n\r\n            let bookSrc = value[0]\r\n            let bookKey = value[1]\r\n\r\n            // 存储上一本的阅读进度，获取打开书的进度\r\n            let cfi = this.rendition.currentLocation().start.cfi\r\n            let currentCfi = null\r\n            this.bookCfi.setItem(this.bookKey, cfi).then(() => {\r\n                console.log(this.bookKey + \" cfi is stored!\")\r\n                console.log(cfi)\r\n                this.bookKey = bookKey\r\n                this.bookCfi.getItem(this.bookKey).then(Cfi => {\r\n                    console.log('get ' + this.bookKey + ' cfi')\r\n                    currentCfi = Cfi\r\n                    console.log('current cfi is ' + currentCfi)\r\n\r\n                    if (this.book != null) {\r\n                        this.book.destroy()\r\n                    }\r\n                    this.showEpub(bookSrc, currentCfi)\r\n                })\r\n            }).then(() => {\r\n\r\n            })\r\n        },\r\n\r\n        showEpub(bookSrc, cfi) {\r\n            console.log(bookSrc)\r\n            // 生成Book对象\r\n            this.book = new ePub(bookSrc, {\r\n                restore: true\r\n            })\r\n            this.rendition = this.book.renderTo('read', {\r\n                width: \"100vw\",\r\n                height: \"100vh\",\r\n                // 兼容iOS\r\n                method: 'default'\r\n            })\r\n\r\n            // 得到书的封面和其他详细信息\r\n            this.book.loaded.metadata.then(meta => {\r\n                this.book.loaded.cover.then(cover => {\r\n                    if (cover != null) {\r\n                        this.book.archive.createUrl(cover).then(url => {\r\n                            meta.cover = url\r\n                            // console.log(meta)\r\n                            this.bookInfo = meta\r\n                        })\r\n                    } else {\r\n                        meta.cover = './static/logo.png'\r\n                        this.bookInfo = meta\r\n                    }\r\n                })\r\n            })\r\n\r\n            // 通过Rendtion.display渲染电子书\r\n            if (cfi != undefined && cfi != null) {\r\n                console.log('ready to ' + cfi)\r\n                this.rendition.display(cfi)\r\n            } else {\r\n                this.rendition.display()\r\n            }\r\n            // 获取Theme对象\r\n            this.themes = this.rendition.themes\r\n            // 设置默认字体\r\n            this.setFontSize(this.defaultFontSize)\r\n            // 注册主题\r\n            this.registerTheme()\r\n            // 设置默认主题\r\n            this.setTheme(this.defaultTheme)\r\n            // Book对象的钩子函数ready\r\n            this.book.ready.then(() => {\r\n                this.navigation = this.book.navigation\r\n                // 生成Locations对象\r\n                return this.book.locations.generate()\r\n            }).then(result => {\r\n                this.locations = this.book.locations\r\n                // 标记电子书为解析完毕状态\r\n                this.bookAvailable = true\r\n                console.log('book available')\r\n            }).then(() => {\r\n                this.showProgress()\r\n            })\r\n        },\r\n\r\n        handleScroll(e) {\r\n            //如果侧栏没有展示就监听鼠标滚轮事件\r\n            if (!this.$refs.menuBar.ifShowContent && !this.$refs.titleBar.showBookStore&&!this.$refs.titleBar.ifShowBookInfo) {\r\n                e.deltaY > 0 ? this.nextPage() : this.prevPage()\r\n            }\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.showEpub(this.bookSrc)\r\n        // 监听鼠标滚轮事件\r\n        // ie and Chrome\r\n        window.addEventListener('mousewheel', this.handleScroll, false)\r\n        // firefox\r\n        window.addEventListener(\"DOMMouseScroll\", this.handleScroll, false)\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import 'assets/styles/global';\r\n\r\n.ebook {\r\n    position: relative;\r\n    // 隐藏侧边和底部的滚动条\r\n    overflow-y: hidden;\r\n    overflow-x: hidden;\r\n\r\n    .read-wrapper {\r\n        .mask {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            z-index: 100;\r\n            width: 100%;\r\n            height: 100%;\r\n            display: flex;\r\n\r\n            .left {\r\n                flex: 0 0 px2rem(100);\r\n            }\r\n\r\n            .center {\r\n                flex: 1;\r\n            }\r\n\r\n            .right {\r\n                flex: 0 0 px2rem(100);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/Ebook.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ebook\"},[_c('title-bar',{ref:\"titleBar\",attrs:{\"bookProgress\":_vm.bookProgress,\"ifTitleAndMenuShow\":_vm.ifTitleAndMenuShow,\"bookInfo\":_vm.bookInfo},on:{\"storeReadProgress\":_vm.storeReadProgress,\"openNewEpub\":_vm.openNewEpub}}),_vm._v(\" \"),_c('div',{staticClass:\"read-wrapper\"},[_c('div',{attrs:{\"id\":\"read\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mask\"},[_c('div',{staticClass:\"left\",on:{\"click\":_vm.prevPage}}),_vm._v(\" \"),_c('div',{staticClass:\"center\",on:{\"click\":_vm.toggleTitleAndMenu}}),_vm._v(\" \"),_c('div',{staticClass:\"right\",on:{\"click\":_vm.nextPage}})])]),_vm._v(\" \"),_c('menu-bar',{ref:\"menuBar\",attrs:{\"ifTitleAndMenuShow\":_vm.ifTitleAndMenuShow,\"fontSizeList\":_vm.fontSizeList,\"defaultFontSize\":_vm.defaultFontSize,\"themeList\":_vm.themeList,\"defaultTheme\":_vm.defaultTheme,\"bookAvailable\":_vm.bookAvailable,\"navigation\":_vm.navigation,\"bookProgress\":_vm.bookProgress},on:{\"setFontSize\":_vm.setFontSize,\"setTheme\":_vm.setTheme,\"onProgressChange\":_vm.onProgressChange,\"jumpTo\":_vm.jumpTo}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-270b3315\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Ebook.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-270b3315\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Ebook.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Ebook.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Ebook.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-270b3315\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Ebook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-270b3315\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Ebook.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Ebook from '@/Ebook'\n\nVue.use(Router)\n\nexport default new Router({\n    routes: [{\n        path: '/',\n        redirect: '/ebook'\n    },\n    {\n        path: '/ebook',\n        component: Ebook\n    }\n    ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\nimport vueAxios from 'vue-axios'\r\nimport axios from 'axios'\r\nimport localForage from 'localforage'\r\n\r\nimport '@/assets/styles/icon.css'\r\nimport '@/assets/styles/global.scss'\r\n\r\nVue.use(vueAxios, axios)\r\nVue.config.productionTip = false\r\n\r\n// 声明数据库存储图书\r\nconst store = localForage.createInstance({\r\n    name: 'bookDB'\r\n})\r\n\r\n// 阅读进度的存储\r\nconst bookCfi = localForage.createInstance({\r\n    name: 'readProgressDB'\r\n})\r\n\r\nVue.prototype.store = store\r\nVue.prototype.bookCfi = bookCfi\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n    el: '#app',\r\n    router,\r\n    components: { App },\r\n    template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}